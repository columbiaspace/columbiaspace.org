{% assign current = page.url | downcase | split: '/' %}

<header class="site-header">
	<!-- Separate navbars for mobile and desktop, because I like bootstrap nav for desktop
	and navbar for mobile collapsed. CSS controls which one. -->
	<!-- Leave the goddamn navbars alone Eugene :) -->
	<!-- Well then fix your terrible CSS namespace collision problems Jake :^) -->
	<!-- Desktop nav bar here -->
	<div class="navbar navbar-fixed-top" role="navigation" id="nav-desktop">
		<div class="container-fluid">
				<ul class="nav nav-justified nav-pills">
				<!--
					<li {% if current[1] == null %} class="aboutNav" {% endif %} >
					<a {% if current[1] == null %} href="#aboutsection" data-scroll="#aboutsection" {% else %} href="/#aboutsection" {% endif %}>About Us</a></li>
				-->
					<li {% if current[1] == null %} class="nav-index-logo" {% else %} class="nav-logo" {% endif %}><a href="/" ><img src="/assets/media/img/csi-logo-small.png" alt="Columbia Space Initiative"></a></li>
					<li {% if current[1] == 'about' %} class='active' {% endif %} >
						<a href="/about">About</a></li>

					<li class="dropdown">
						<a class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">
							Members <span class="caret"></span>
						</a>
						<ul class="dropdown-menu">
							{% for node in site.pages %}
								{% if node.group == "members" %}
									<li><a href="{{node.url}}">{{node.abstracttitle}}</a></li>
								{% endif %}
							{% endfor %}
						</ul>
					</li>
					<li class="dropdown">
						<a class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">
							Missions <span class="caret"></span>
						</a>
						<ul class="dropdown-menu">
							{% for node in site.pages %}
								{% if page.url == node.url and node.group == "mission" %}
                                    {% if node.url == "/missions/mission-nasa-src/" %}
                                        <li class="active"><a href="{{node.url}}">Space Robotics</a></li>
                                        <!-- Their jumbo title was too long and it was annoying me -->
                                    {% else %}
                                        <li class="active"><a href="{{node.url}}">{{node.jumbotitle}}</a></li>
                                    {% endif %}
								{% elsif node.group == "mission" %}
									<li><a href="{{node.url}}">{{node.jumbotitle}}</a></li>
								{% endif %}
							{% endfor %}
							<li class="divider"></li>
							{% for node in site.pages %}
								{% if page.url == node.url and node.group == "pastmission" %}
									<li class="active oldmission"> <a href="{{node.url}}">{{node.jumbotitle}}</a></li>
								{% elsif node.group == "pastmission" %}
									<li class="oldmission"> <a href="{{node.url}}">{{node.jumbotitle}}</a></li>
								{% endif %}
							{% endfor %}
						</ul>
					</li>
					<li {% if current[1] == 'sponsors' %} class='active' {% endif %} >
						<a href="/sponsors/2018/">Sponsors</a></li>
					<li {% if current[1] == 'news' %} class='active' {% endif %} >
						<a href="/news">News</a></li>
					<li {% if current[1] == 'press' %} class='active' {% endif %} >
						<a href="/press">Press</a></li>
					<li {% if current[1] == 'contact' %} class='active' {% endif %} >
						<a href="/contact">Contact</a></li>
				</ul>
		</div>
	</div>

	<!-- Mobile nav bar here -->
	<div class="navbar navbar-fixed-top" role="navigation" id="nav-mobile">
		<div class="container-fluid">
			<div class="navbar-header">
				<button type="button" class="btn btn-default navbar-toggle collapsed" data-toggle="collapse" data-target="#myNavbar" aria-expanded="false">
        			<span class="glyphicon glyphicon-menu-hamburger"></span>
      			</button>
			</div>
			<div class="collapse navbar-collapse" id="myNavbar">
				<ul class="nav navbar-nav">
					<li {% if current[1] == null %} class="nav-index-logo" {% else %} class="nav-logo" {% endif %}><a href="/" ><img src="/assets/media/img/csi-logo-small.png" alt="Columbia Space Initiative"></a></li>
					<li {% if current[1] == null %} class="aboutNav" {% endif %} >
					<a href="/about">About Us</a></li>
					<li class="dropdown">
						<a class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">
							Members <span class="caret"></span>
						</a>
						<ul class="dropdown-menu">
							{% for node in site.pages %}
								{% if node.group == "members" %}
									<li><a href="{{node.url}}">{{node.abstracttitle}}</a></li>
								{% endif %}
							{% endfor %}
						</ul>
					</li>
					<li class="dropdown">
						<a class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">
							Missions <span class="caret"></span>
						</a>
						<ul class="dropdown-menu">
							{% for node in site.pages %}
								{% if page.url == node.url and node.group == "mission" %}
									<li class="active"><a href="{{node.url}}">{{node.jumbotitle}}</a></li>
								{% elsif node.group == "mission" %}
									<li><a href="{{node.url}}">{{node.jumbotitle}}</a></li>
								{% endif %}
							{% endfor %}
						</ul>
					</li>
					<li {% if current[1] == 'sponsors' %} class='active' {% endif %} >
						<a href="/sponsors/2018/">Sponsors</a></li>
					<li {% if current[1] == 'news' %} class='active' {% endif %} >
						<a href="/news">News</a></li>
					<li {% if current[1] == 'press' %} class='active' {% endif %} >
						<a href="/press">Press</a></li>
					<li {% if current[1] == 'contact' %} class='active' {% endif %} >
						<a href="/contact">Contact</a></li>
				</ul>
			</div>
		</div>
	</div>
</header>
